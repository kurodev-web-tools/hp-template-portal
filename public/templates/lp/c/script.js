document.addEventListener('DOMContentLoaded',()=>{initHeaderScroll();initFadeAnimations();initFormValidation();initMarqueePause()});function initHeaderScroll(){const header=document.querySelector('.header');if(!header)return;let ticking=false;function update(){const scrolled=window.scrollY>50;header.style.background=scrolled?'rgba(15,23,42,0.98)':'var(--navy)';header.style.boxShadow=scrolled?'0 4px 20px rgba(0,0,0,0.3)':'none';ticking=false}window.addEventListener('scroll',()=>{if(!ticking){requestAnimationFrame(update);ticking=true}},{passive:true})}function initFadeAnimations(){const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.opacity='1';entry.target.style.transform='translateY(0)';observer.unobserve(entry.target)}})},{threshold:0.1});document.querySelectorAll('.service-card, .about__content, .contact__content').forEach(el=>{el.style.opacity='0';el.style.transform='translateY(20px)';el.style.transition='opacity 0.6s ease, transform 0.6s ease';observer.observe(el)})}function initFormValidation(){const form=document.querySelector('.contact__form');if(!form)return;form.addEventListener('submit',(e)=>{e.preventDefault();let valid=true;const required=form.querySelectorAll('[required]');required.forEach(field=>{if(!field.value.trim()){valid=false;field.style.borderColor='#EF4444'}else{field.style.borderColor=''}});if(valid){const btn=form.querySelector('.contact__submit');btn.textContent='送信完了';btn.style.background='var(--gold-light)';setTimeout(()=>{btn.textContent='無料相談を申し込む';btn.style.background='';form.reset()},3000)}})}function initMarqueePause(){const marquee=document.querySelector('.media__track');if(!marquee)return;marquee.addEventListener('mouseenter',()=>{marquee.style.animationPlayState='paused'});marquee.addEventListener('mouseleave',()=>{marquee.style.animationPlayState='running'})}document.querySelectorAll('a[href^="#"]').forEach(link=>{link.addEventListener('click',(e)=>{const href=link.getAttribute('href');if(href==='#')return;const target=document.querySelector(href);if(target){e.preventDefault();window.scrollTo({top:target.offsetTop-80,behavior:'smooth'})}})});
